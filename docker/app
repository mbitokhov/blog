FROM php:7.2-fpm

RUN apt-get update && apt-get install -y libmcrypt-dev mysql-client libz-dev git zip unzip gnupg \
       #php-curl php-mbstring composer
       && docker-php-ext-install pdo_mysql

WORKDIR /
RUN curl -sL https://deb.nodesource.com/setup_8.x -o nodesource_setup.sh \
    && bash nodesource_setup.sh \
    && apt-get install -y nodejs build-essential

RUN apt-get install -y vim

RUN useradd --no-log-init -r -m blog

ADD ./ /home/blog/
RUN chown -R blog:blog /home/blog/ 
WORKDIR /home/blog
USER blog

ENTRYPOINT ["/home/blog/entrypoint.sh"]
CMD ["php-fpm"]

